{"ast":null,"code":"import React,{useContext,useRef}from'react';import classes from'./Login.module.css';import{useHistory}from'react-router-dom';import{cartContext}from'../Store/CartProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var enteredpass=useRef();var enteredEmail=useRef();var ctx=useContext(cartContext);var history=useHistory();var submitHandler=function submitHandler(e){e.preventDefault();fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC6C1LFSK9-DCxL5exgwna68Jc3v14FXkA',{method:'POST',body:JSON.stringify({email:enteredEmail.current.value,password:enteredpass.current.value,returnSecureToken:true}),headers:{'Content-Type':'application/json'}}).then(function(res){if(res.ok){var responce=res.json();responce.then(function(data){ctx.setEmail(enteredEmail);console.log(ctx);console.log(\"idTOken:\",data.idToken);ctx.setToken(data.idToken);localStorage.setItem(\"idToken\",data.idToken);ctx.setIsLoggedIn(true);history.push('/products');});}else{console.log(res);return res.json().then(function(data){var errorMessage='Authentication failed!';alert(errorMessage);});}});};return/*#__PURE__*/_jsxs(\"section\",{className:classes.auth,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",ref:enteredEmail})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",required:true,ref:enteredpass})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,children:\"Login\"})})]})]});};export default Login;","map":{"version":3,"names":["React","useContext","useRef","classes","useHistory","cartContext","jsx","_jsx","jsxs","_jsxs","Login","enteredpass","enteredEmail","ctx","history","submitHandler","e","preventDefault","fetch","method","body","JSON","stringify","email","current","value","password","returnSecureToken","headers","then","res","ok","responce","json","data","setEmail","console","log","idToken","setToken","localStorage","setItem","setIsLoggedIn","push","errorMessage","alert","className","auth","children","control","htmlFor","type","id","ref","required","actions","onClick"],"sources":["C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/src/Components/Pages/Login.js"],"sourcesContent":["import React, { useContext, useRef } from 'react'\nimport classes from './Login.module.css'\nimport { useHistory } from 'react-router-dom'\nimport { cartContext } from '../Store/CartProvider';\n\nconst Login = () => {\n    let enteredpass = useRef();\n    let enteredEmail = useRef();\n    let ctx = useContext(cartContext);\n    let history = useHistory();\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n        fetch(\n            'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC6C1LFSK9-DCxL5exgwna68Jc3v14FXkA',\n            {\n                method: 'POST',\n                body: JSON.stringify({\n                    email: enteredEmail.current.value,\n                    password: enteredpass.current.value,\n                    returnSecureToken: true,\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }\n        )\n            .then((res) => {\n                if (res.ok) {\n                    let responce = res.json();\n                    responce.then((data) => {\n                        ctx.setEmail(enteredEmail);\n                        console.log(ctx);\n                        console.log(\"idTOken:\", data.idToken);\n                        ctx.setToken(data.idToken);\n                        localStorage.setItem(\"idToken\", data.idToken);\n                        ctx.setIsLoggedIn(true);\n                        history.push('/products')\n                    })\n                } else {\n                    console.log(res)\n                    return res.json().then((data) => {\n                        let errorMessage = 'Authentication failed!';\n                        alert(errorMessage);\n                    });\n                }\n            });\n    }\n\n    return (\n        <section className={classes.auth}>\n            <h1>Login</h1>\n            <form >\n                <div className={classes.control}>\n                    <label htmlFor='email'>Your Email</label>\n                    <input type='email' id='email' ref={enteredEmail} />\n                </div>\n                <div className={classes.control}>\n                    <label htmlFor='password'>Your Password</label>\n                    <input\n                        type='password'\n                        id='password'\n                        required\n                        ref={enteredpass}\n                    />\n                </div>\n                <div className={classes.actions}>\n                    <button onClick={submitHandler}>Login</button>\n                </div>\n            </form>\n        </section>\n    )\n}\n\nexport default Login\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}