{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext}from'react';import{cartContext}from'../Store/CartProvider';// function removeSpecialChar(str) {\n//     let newmail=\"\";\n//     for (let i = 0; i < str.length; i++) {\n//      if(str[i]!==\"@\" && str[i]!==\".\"){\n//          newmail=newmail+str[i];\n//      } \n//     } \n//     return newmail;\n//  }\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicItem=function MusicItem(props){var cartCtx=useContext(cartContext);function checkItem(elememt){var flag=false;for(var i=0;i<cartCtx.cartItems.items.length;i++){if(cartCtx.cartItems.items[i].title===elememt.title){flag=true;break;}}return flag;}var handleAddItem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newItemInCart,addedCartItems,usermailid,responce;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();newItemInCart=_objectSpread({},props.product);if(!(checkItem(newItemInCart)||cartCtx.email==null)){_context.next=6;break;}alert(\"Item is already present in cart\");_context.next=20;break;case 6:addedCartItems=[].concat(_toConsumableArray(cartCtx.cartItems.items),[newItemInCart]);_context.prev=7;usermailid=cartCtx.email.replace(/[^a-zA-Z0-9 ]/g,'');_context.next=11;return fetch(\"https://crudcrud.com/api/6923f975f2744bbbbe232eb22a0000bb/cart\".concat(usermailid),{method:'POST',body:JSON.stringify(newItemInCart),headers:{'Content-Type':'application/json'}});case 11:responce=_context.sent;console.log(responce.json());alert(\"item added to cart\");_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](7);console.log(\"Something went wrong\");case 19:cartCtx.setCartItems({items:addedCartItems,totalItems:cartCtx.cartItems.totalItems+1,totalAmount:cartCtx.cartItems.totalAmount+newItemInCart.price});case 20:case\"end\":return _context.stop();}},_callee,null,[[7,16]]);}));return function handleAddItem(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-md-3 mx-3 border-0\",style:{width:\"18rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{height:\"3.5rem\"},children:/*#__PURE__*/_jsx(\"h5\",{children:props.title})}),/*#__PURE__*/_jsx(\"img\",{src:props.imageUrl,className:\"card-img-top\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"card-title\",children:[\"$\",props.price]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-info text-light fw-bold float-end\",onClick:handleAddItem,children:\"Add to cart\"})]})]})});};export default MusicItem;","map":{"version":3,"names":["React","useContext","cartContext","jsx","_jsx","jsxs","_jsxs","MusicItem","props","cartCtx","checkItem","elememt","flag","i","cartItems","items","length","title","handleAddItem","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","newItemInCart","addedCartItems","usermailid","responce","wrap","_callee$","_context","prev","next","preventDefault","_objectSpread","product","email","alert","concat","_toConsumableArray","replace","fetch","method","body","JSON","stringify","headers","sent","console","log","json","t0","setCartItems","totalItems","totalAmount","price","stop","_x","apply","arguments","className","children","style","width","height","src","imageUrl","alt","type","onClick"],"sources":["C:/Users/chaha/Downloads/E-COMMERCE TAKS/Task-.-24-Making-the-cart-user-specific-main/src/Components/Layout/MusicItem.js"],"sourcesContent":["import React, { useContext } from 'react'\nimport { cartContext } from '../Store/CartProvider';\n\n// function removeSpecialChar(str) {\n//     let newmail=\"\";\n//     for (let i = 0; i < str.length; i++) {\n//      if(str[i]!==\"@\" && str[i]!==\".\"){\n//          newmail=newmail+str[i];\n//      } \n//     } \n//     return newmail;\n//  }\nconst MusicItem = (props) => {\n    const cartCtx = useContext(cartContext);\n    function checkItem(elememt) {\n        let flag = false;\n        for (let i = 0; i < cartCtx.cartItems.items.length; i++) {\n            if (cartCtx.cartItems.items[i].title === elememt.title) {\n                flag = true;\n                break;\n            }\n        }\n        return flag;\n    }\n    const handleAddItem =async (e) => {\n        e.preventDefault();\n        let newItemInCart = { ...props.product };\n        if (checkItem(newItemInCart) || cartCtx.email==null) {\n            alert(\"Item is already present in cart\");\n        } else {\n            let addedCartItems = [...cartCtx.cartItems.items, newItemInCart]\n            try{\n                let usermailid=cartCtx.email.replace(/[^a-zA-Z0-9 ]/g, '');\n                let responce = await fetch(`https://crudcrud.com/api/6923f975f2744bbbbe232eb22a0000bb/cart${usermailid}`,{\n                method: 'POST',\n                body: JSON.stringify(newItemInCart),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n              } );\n              console.log(responce.json());\n              alert(\"item added to cart\")\n            } catch (e) {\n              console.log(\"Something went wrong\");\n            }\n            cartCtx.setCartItems({ items: addedCartItems, totalItems: cartCtx.cartItems.totalItems + 1, totalAmount: cartCtx.cartItems.totalAmount + newItemInCart.price });\n        }\n    }\n        \n        return (\n            <div className='row d-flex justify-content-between'>\n                <div className=\"card col-md-3 mx-3 border-0\" style={{ width: \"18rem\" }}>\n                    <div style={{ height: \"3.5rem\" }}><h5>{props.title}</h5></div>\n                    <img src={props.imageUrl} className=\"card-img-top\" alt=\"...\" />\n                    <div className=\"card-body\">\n                        <span className=\"card-title\">${props.price}</span>\n                        <button type=\"button\" className=\"btn btn-info text-light fw-bold float-end\" onClick={handleAddItem}>Add to cart</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n\nexport default MusicItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}